{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\liisa\\\\Documents\\\\Koodit\\\\portfolio\\\\CodePortfolio\\\\surveysApp_javascript\\\\surveys_front\\\\src\\\\components\\\\charts\\\\BarChart.js\",\n    _s = $RefreshSig$();\n\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\nimport SurveyContextProvider, { useSurveyContext } from '../../contexts/SurveyContext.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\n\nconst BarChart = props => {\n  _s();\n\n  const {\n    selectedSurvey\n  } = useSurveyContext();\n  const selectedQuestion = selectedSurvey.questions.filter(q => q.questionId === props.question);\n  const type = selectedQuestion[0].questionType;\n  let surveyAnswers = [];\n  type === \"dropdown\" ? surveyAnswers = selectedSurvey.answers.map(a => a[props.question]) : surveyAnswers = selectedSurvey.answers.map(a => {\n    if (a[props.question]) {\n      surveyAnswers = [...surveyAnswers, ...a[props.question]];\n    }\n\n    return surveyAnswers;\n  });\n  console.log(surveyAnswers);\n  const multipleChoiceAnswers = surveyAnswers.pop();\n  console.log(multipleChoiceAnswers);\n  let answerLabels = [];\n  type === \"dropdown\" ? answerLabels = [...new Set(surveyAnswers)] : answerLabels = [...new Set(multipleChoiceAnswers)];\n  console.log(answerLabels);\n  let answerCounts = [];\n  type === \"dropdown\" ? answerLabels.map(label => {\n    const filtered = surveyAnswers.filter(answer => answer === label);\n    return filtered.length;\n  }) : answerLabels.map(label => {\n    const filtered = multipleChoiceAnswers.filter(answer => answe);\n  });\n  console.log(answerCounts);\n  const labels = answerLabels;\n  const data = {\n    labels,\n    datasets: [{\n      label: 'answers',\n      data: answerCounts,\n      backgroundColor: 'rgba(55, 99, 132, 1)',\n      borderColor: 'rgb(55, 99, 132, 1)'\n    }]\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Bar, {\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(BarChart, \"ca3SUvhwJ6PJ55LPQ0pHj/7bvY4=\", false, function () {\n  return [useSurveyContext];\n});\n\n_c = BarChart;\nexport default BarChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"BarChart\");","map":{"version":3,"names":["Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","Bar","SurveyContextProvider","useSurveyContext","register","BarChart","props","selectedSurvey","selectedQuestion","questions","filter","q","questionId","question","type","questionType","surveyAnswers","answers","map","a","console","log","multipleChoiceAnswers","pop","answerLabels","Set","answerCounts","label","filtered","answer","length","answe","labels","data","datasets","backgroundColor","borderColor"],"sources":["C:/Users/liisa/Documents/Koodit/portfolio/CodePortfolio/surveysApp_javascript/surveys_front/src/components/charts/BarChart.js"],"sourcesContent":["import { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend, } from 'chart.js';\r\nimport { Bar } from 'react-chartjs-2';\r\n\r\nimport SurveyContextProvider, { useSurveyContext } from '../../contexts/SurveyContext.js';\r\n\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\r\n\r\nconst BarChart = (props) => {\r\n\r\n    const { selectedSurvey } = useSurveyContext();\r\n\r\n    const selectedQuestion = selectedSurvey.questions.filter(q => q.questionId === props.question);\r\n    const type = selectedQuestion[0].questionType;\r\n\r\n    let surveyAnswers = []\r\n    type === \"dropdown\" ?\r\n        surveyAnswers = selectedSurvey.answers.map(a => a[props.question])\r\n        : surveyAnswers = selectedSurvey.answers.map(a => {\r\n            if (a[props.question]) {\r\n                surveyAnswers = [...surveyAnswers, ...a[props.question]];\r\n            }\r\n            return surveyAnswers\r\n        });\r\n\r\n    console.log(surveyAnswers);\r\n\r\n    const multipleChoiceAnswers = surveyAnswers.pop();\r\n    console.log(multipleChoiceAnswers);\r\n\r\n    let answerLabels = []\r\n    type === \"dropdown\" ? answerLabels = [...new Set(surveyAnswers)] : answerLabels = [...new Set(multipleChoiceAnswers)];\r\n    console.log(answerLabels);\r\n\r\n    let answerCounts = []\r\n    type === \"dropdown\" ?\r\n        answerLabels.map(label => {\r\n            const filtered = surveyAnswers.filter(answer => answer === label);\r\n            return filtered.length;\r\n        })\r\n        : answerLabels.map(label => {\r\n            const filtered = multipleChoiceAnswers.filter(answer => answe)\r\n        })\r\n        console.log(answerCounts);\r\n\r\n    const labels = answerLabels;\r\n\r\n    const data = {\r\n        labels,\r\n        datasets: [\r\n            {\r\n                label: 'answers',\r\n                data: answerCounts,\r\n                backgroundColor: 'rgba(55, 99, 132, 1)',\r\n                borderColor: 'rgb(55, 99, 132, 1)'\r\n            },\r\n        ],\r\n    };\r\n    return (\r\n        <>\r\n            <Bar data={data} />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default BarChart;"],"mappings":";;;AAAA,SAASA,KAAK,IAAIC,OAAlB,EAA2BC,aAA3B,EAA0CC,WAA1C,EAAuDC,UAAvD,EAAmEC,KAAnE,EAA0EC,OAA1E,EAAmFC,MAAnF,QAAkG,UAAlG;AACA,SAASC,GAAT,QAAoB,iBAApB;AAEA,OAAOC,qBAAP,IAAgCC,gBAAhC,QAAwD,iCAAxD;;;AAEAT,OAAO,CAACU,QAAR,CAAiBT,aAAjB,EAAgCC,WAAhC,EAA6CC,UAA7C,EAAyDC,KAAzD,EAAgEC,OAAhE,EAAyEC,MAAzE;;AAEA,MAAMK,QAAQ,GAAIC,KAAD,IAAW;EAAA;;EAExB,MAAM;IAAEC;EAAF,IAAqBJ,gBAAgB,EAA3C;EAEA,MAAMK,gBAAgB,GAAGD,cAAc,CAACE,SAAf,CAAyBC,MAAzB,CAAgCC,CAAC,IAAIA,CAAC,CAACC,UAAF,KAAiBN,KAAK,CAACO,QAA5D,CAAzB;EACA,MAAMC,IAAI,GAAGN,gBAAgB,CAAC,CAAD,CAAhB,CAAoBO,YAAjC;EAEA,IAAIC,aAAa,GAAG,EAApB;EACAF,IAAI,KAAK,UAAT,GACIE,aAAa,GAAGT,cAAc,CAACU,OAAf,CAAuBC,GAAvB,CAA2BC,CAAC,IAAIA,CAAC,CAACb,KAAK,CAACO,QAAP,CAAjC,CADpB,GAEMG,aAAa,GAAGT,cAAc,CAACU,OAAf,CAAuBC,GAAvB,CAA2BC,CAAC,IAAI;IAC9C,IAAIA,CAAC,CAACb,KAAK,CAACO,QAAP,CAAL,EAAuB;MACnBG,aAAa,GAAG,CAAC,GAAGA,aAAJ,EAAmB,GAAGG,CAAC,CAACb,KAAK,CAACO,QAAP,CAAvB,CAAhB;IACH;;IACD,OAAOG,aAAP;EACH,CALiB,CAFtB;EASAI,OAAO,CAACC,GAAR,CAAYL,aAAZ;EAEA,MAAMM,qBAAqB,GAAGN,aAAa,CAACO,GAAd,EAA9B;EACAH,OAAO,CAACC,GAAR,CAAYC,qBAAZ;EAEA,IAAIE,YAAY,GAAG,EAAnB;EACAV,IAAI,KAAK,UAAT,GAAsBU,YAAY,GAAG,CAAC,GAAG,IAAIC,GAAJ,CAAQT,aAAR,CAAJ,CAArC,GAAmEQ,YAAY,GAAG,CAAC,GAAG,IAAIC,GAAJ,CAAQH,qBAAR,CAAJ,CAAlF;EACAF,OAAO,CAACC,GAAR,CAAYG,YAAZ;EAEA,IAAIE,YAAY,GAAG,EAAnB;EACAZ,IAAI,KAAK,UAAT,GACIU,YAAY,CAACN,GAAb,CAAiBS,KAAK,IAAI;IACtB,MAAMC,QAAQ,GAAGZ,aAAa,CAACN,MAAd,CAAqBmB,MAAM,IAAIA,MAAM,KAAKF,KAA1C,CAAjB;IACA,OAAOC,QAAQ,CAACE,MAAhB;EACH,CAHD,CADJ,GAKMN,YAAY,CAACN,GAAb,CAAiBS,KAAK,IAAI;IACxB,MAAMC,QAAQ,GAAGN,qBAAqB,CAACZ,MAAtB,CAA6BmB,MAAM,IAAIE,KAAvC,CAAjB;EACH,CAFC,CALN;EAQIX,OAAO,CAACC,GAAR,CAAYK,YAAZ;EAEJ,MAAMM,MAAM,GAAGR,YAAf;EAEA,MAAMS,IAAI,GAAG;IACTD,MADS;IAETE,QAAQ,EAAE,CACN;MACIP,KAAK,EAAE,SADX;MAEIM,IAAI,EAAEP,YAFV;MAGIS,eAAe,EAAE,sBAHrB;MAIIC,WAAW,EAAE;IAJjB,CADM;EAFD,CAAb;EAWA,oBACI;IAAA,uBACI,QAAC,GAAD;MAAK,IAAI,EAAEH;IAAX;MAAA;MAAA;MAAA;IAAA;EADJ,iBADJ;AAKH,CAvDD;;GAAM5B,Q;UAEyBF,gB;;;KAFzBE,Q;AAyDN,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}